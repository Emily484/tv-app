<app-menu></app-menu>
<div>
  <ng-template [ngIf]="!isLoading" [ngIfElse]="loadingSpinner"></ng-template>
  <div class='episode-container'>
    <br>
    <mat-tab-group (selectedTabChange)="getSelectedSeasonId($event)">
      <mat-tab class="season-tabs" *ngFor="let season of _seasons; let tabIndex = index">
        <ng-template mat-tab-label> S{{season.seasonNumber}}</ng-template>
        <ng-template matTabContent>
          <div fxFlex fxLayout="column" fxLayoutGap="10px">
            <div fxLayout="row wrap">
              <div *ngIf="_episodes && _episodes.length > 0; else noEpisode"></div>
              <div class="card-picture" *ngFor="let episode of _episodes" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                fxFlex.xs="100" fxLayout="column" style="padding: 5px;">
                <mat-card>
                  <mat-card-header>
                    <mat-card-title id="cardTitle">
                      <span class="card-title">{{episode.episodeNumber}}. {{episode.episodeName}}</span>
                    </mat-card-title>
                    <mat-card-subtitle id="airDate">AirDate: {{episode.airdate | date : 'mediumDate'}} at
                      {{episode.airtime}} </mat-card-subtitle>
                    <mat-card-subtitle id="airDate"> Runtime: {{episode.runtime}} minutes
                    </mat-card-subtitle>
                  </mat-card-header>
                  <img mat-card-image [src]="episode.image">
                  <img mat-card-image src="../../assets/images/no-img-landscape-text.png" *ngIf="!episode.image" class="noImg">
                  <mat-card-content id="summary">{{episode.summary | slice:0:250}}</mat-card-content>
                </mat-card>
              </div>
            </div>
          </div>
        </ng-template>
      </mat-tab>
    </mat-tab-group>
    <ng-template #noEpisode>
      <div id="noepisodes">
        <div fxFlexFill id="noepisodes">
          <span> Sorry! We don't have the Episode list for this show yet.</span>
        </div>
      </div>
    </ng-template>

    <ng-template #loadingSpinner>
      <mat-progress-bar class="progress-style" mode="determinate" value="40" aria-label="The page is loading">
      </mat-progress-bar>
    </ng-template>
  </div>

</div>
<ng-template #noEpisode>
  <div id="noepisodes">
    <div fxFlexFill id="noepisodes">
      <span> Sorry! We don't have the Episode list for this show yet.</span>
    </div>
  </div>
</ng-template>
